#!/usr/bin/env bash
USAGE="$0: [-h --help ] [ -r --remove ] [-d --dir ] FILE COMMENT"
remove=0
check(){
    if [[ $? -ne 0 ]]; then
        echo "Sorry, an error occured. $1"
        exit
    fi
}
args(){
    case $1 in 
        -h|--help) echo $USAGE
            exit 0
            ;;
        -r|--remove) remove=1
            shift
            args $@
            ;;
        -d|--dir) cd ~/$2
            check
            test -d ./.git 
            check "No git repository exists in this directory"
            shift 2
            args $@
            ;;
    esac
    if [[ $remove == 0 ]]; then
        git add $1
    else
        git rm $1
    fi
    check "No such file in specified git repo"
    shift
    comment=$@
    git commit -m "$comment"
    git push origin master
    exit 0
}
args $@
