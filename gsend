#!/usr/bin/env bash
USAGE="$0: [ -r --remove ] [-b -d ] FILE COMMENT"
remove=0
if [[ $# -gt 4 ]] || [[ $# -lt 2 ]]; then
    echo "$USAGE"
    exit 1
fi

if [[ "$1" == "-r" ]] || [[ "$1" == "--remove" ]]; then
    remove=1
    shift
fi

case $1 in
    -d) cd ~/.dotfiles
        shift
        ;;
    -b) cd ~/bin
        shift
        ;;
esac

if [[ $remove == 0 ]]; then
    git add $1
else
    git rm $1
fi

git commit -m "$2"
git push origin master
